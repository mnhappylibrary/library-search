<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¬¸ë‚´í–‰ë³µ ì‘ì€ë„ì„œê´€ ë„ì„œ ê²€ìƒ‰</title>
<style>
body { font-family: sans-serif; padding: 20px; }
h1 { margin-bottom: 5px; }
.subtitle { color: #666; margin-bottom: 15px; }
.notice { font-size: 14px; color: #555; margin-bottom: 10px; }
.count { font-weight: bold; margin: 10px 0; }
.guide { color: #777; margin-top: 20px; }
input { width: 100%; padding: 10px; font-size: 16px; margin: 10px 0; }
table { width: 100%; border-collapse: collapse; display: none; }
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  font-size: 14px;
  text-align: left;
}
th { background: #f2f2f2; }
</style>
</head>
<body>

<h1>ğŸ“š ë¬¸ë‚´í–‰ë³µ ì‘ì€ë„ì„œê´€ ğŸ“š</h1>
<div class="subtitle">ë„ì„œ ê²€ìƒ‰ ì„œë¹„ìŠ¤</div>

<div class="notice">
â€» ëŒ€ì¶œ ê°€ëŠ¥ ì—¬ë¶€ëŠ” ë„ì„œê´€ìœ¼ë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.
</div>

<div class="count" id="bookCount">
ì´ ë„ì„œ ë³´ìœ  ìˆ˜: 0ê¶Œ
</div>

<input type="text" id="search"
placeholder="ë„ì„œë²ˆí˜¸ Â· ë„ì„œëª… Â· ì €ì Â· ì¶œíŒì‚¬ Â· ì²­êµ¬ê¸°í˜¸ ê²€ìƒ‰">

<div class="guide" id="guide">
ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë„ì„œëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤.
</div>

<table id="table">
<thead>
<tr>
  <th>ë„ì„œë²ˆí˜¸</th>
  <th>ë„ì„œëª…</th>
  <th>ì €ì</th>
  <th>ì¶œíŒì‚¬</th>
  <th>ì²­êµ¬ê¸°í˜¸</th>
  <th>ë¹„ê³ </th>
</tr>
</thead>
<tbody id="bookTable"></tbody>
</table>

<script>
let rows = [];

function clean(t) {
  return t.replace(/^\uFEFF/, '').replace(/\r/g, '');
}

fetch('ë„ì„œëª©ë¡.csv')
  .then(res => res.text())
  .then(text => {
    rows = clean(text)
      .split('\n')
      .slice(1)
      .map(r => r.split(','))
      .filter(r => r.length >= 6);

    document.getElementById('bookCount').innerText =
      `ì´ ë„ì„œ ë³´ìœ  ìˆ˜: ${rows.length}ê¶Œ`;
  });

function render(data) {
  const table = document.getElementById('table');
  const body = document.getElementById('bookTable');
  body.innerHTML = '';

  if (data.length === 0) {
    table.style.display = 'none';
    return;
  }

  table.style.display = 'table';

  data.forEach(r => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${r[0]}</td>
      <td>${r[1]}</td>
      <td>${r[2]}</td>
      <td>${r[3]}</td>
      <td>${r[4]}</td>
      <td>${r[5]}</td>
    `;
    body.appendChild(tr);
  });
}

document.getElementById('search').addEventListener('input', function() {
  const keyword = this.value.trim().toLowerCase();
  const guide = document.getElementById('guide');

  if (keyword === '') {
    guide.style.display = 'block';
    document.getElementById('table').style.display = 'none';
    document.getElementById('bookCount').innerText =
      `ì´ ë„ì„œ ë³´ìœ  ìˆ˜: ${rows.length}ê¶Œ`;
    return;
  }

  guide.style.display = 'none';

  const filtered = rows.filter(r =>
    r.join(' ').toLowerCase().includes(keyword)
  );

  document.getElementById('bookCount').innerText =
    `ê²€ìƒ‰ ê²°ê³¼: ${filtered.length}ê¶Œ`;

  render(filtered);
});
</script>

</body>
</html>
